
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Access and analyze SEC filings, financial statements, insider trading, and investment fund data">
      
      
      
      
        <link rel="prev" href="../guides/company-insiders/">
      
      
        <link rel="next" href="../guides/extract-statements/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Getting subsets of companies - EdgarTools - Python Library for SEC Data Analysis</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#company-subsets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EdgarTools - Python Library for SEC Data Analysis" class="md-header__button md-logo" aria-label="EdgarTools - Python Library for SEC Data Analysis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EdgarTools - Python Library for SEC Data Analysis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting subsets of companies
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href=".." class="md-tabs__link">
          
  
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../guides/working-with-filing/" class="md-tabs__link">
          
  
  
    
  
  How to Guides

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../getting-xbrl/" class="md-tabs__link">
          
  
  
    
  
  XBRL and Financials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../data-objects/" class="md-tabs__link">
          
  
  
    
  
  Data Objects

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../concepts/sec-filings/" class="md-tabs__link">
          
  
  
    
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/company/" class="md-tabs__link">
          
  
  
    
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../resources/troubleshooting/" class="md-tabs__link">
          
  
  
    
  
  Resources

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../contributing/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EdgarTools - Python Library for SEC Data Analysis" class="md-nav__button md-logo" aria-label="EdgarTools - Python Library for SEC Data Analysis" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    EdgarTools - Python Library for SEC Data Analysis
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href=".." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    How to Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            How to Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Filings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Filings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/working-with-filing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with a Filing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/searching-filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Search for Specific Filings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/filtering-filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filter Filings by Date/Type
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/filing-attachments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Access Filing Attachments
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/current-filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Finding the most recent filings
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Companies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Companies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/finding-companies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Working with a company
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/company-facts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting company facts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/multi-year-financial-data-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a Multi Year Financials Data Api
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/company-insiders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting a list of company insiders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Getting subsets of companies
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Getting subsets of companies
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fluent-interface-with-companysubset" class="md-nav__link">
    <span class="md-ellipsis">
      Fluent Interface with CompanySubset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Core Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exchange-based-selection" class="md-nav__link">
    <span class="md-ellipsis">
      Exchange-Based Selection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#popular-companies" class="md-nav__link">
    <span class="md-ellipsis">
      Popular Companies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampling-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Sampling Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-and-combining" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering and Combining
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filtering and Combining">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#includeexclude-specific-companies" class="md-nav__link">
    <span class="md-ellipsis">
      Include/Exclude Specific Companies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Filtering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-and-intersecting-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Combining and Intersecting Sets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#convenience-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Convenience Functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#research-dataset-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Research Dataset Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sector-based-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Sector-Based Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-learning-dataset-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Machine Learning Dataset Preparation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Data Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-edgar-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with Edgar Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Financial Analysis
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Financial Analysis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/extract-statements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extract Financial Statements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Ranking Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/local-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Local Data Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/ssl_verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SSL Issues and Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/sgml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parsing SGML
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    XBRL and Financials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            XBRL and Financials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-xbrl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting XBRL from Filings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xbrl-querying/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Querying XBRL Facts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/xbrl-footnotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting footnotes from XBRL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Objects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Data Objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Objects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../insider-filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Insider Filings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13f-filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ThirteenF Holding Reports
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/sec-filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding SEC Filings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/data-objects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding Data Objects
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core Objects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            Core Objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/company/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Company
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/filing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/filings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Filings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/xbrl/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XBRL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Common Issues & Solutions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Performance Best Practices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/sec-compliance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SEC Rate Limits & Compliance
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-features" class="md-nav__link">
    <span class="md-ellipsis">
      Key Features
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fluent-interface-with-companysubset" class="md-nav__link">
    <span class="md-ellipsis">
      Fluent Interface with CompanySubset
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Core Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exchange-based-selection" class="md-nav__link">
    <span class="md-ellipsis">
      Exchange-Based Selection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#popular-companies" class="md-nav__link">
    <span class="md-ellipsis">
      Popular Companies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sampling-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Sampling Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-and-combining" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering and Combining
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Filtering and Combining">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#includeexclude-specific-companies" class="md-nav__link">
    <span class="md-ellipsis">
      Include/Exclude Specific Companies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Filtering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combining-and-intersecting-sets" class="md-nav__link">
    <span class="md-ellipsis">
      Combining and Intersecting Sets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#convenience-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Convenience Functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#research-dataset-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Research Dataset Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sector-based-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Sector-Based Analysis
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#machine-learning-dataset-preparation" class="md-nav__link">
    <span class="md-ellipsis">
      Machine Learning Dataset Preparation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Data Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Considerations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-with-edgar-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Integration with Edgar Tools
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="company-subsets">Company Subsets</h1>
<p>The <code>edgar.reference.company_subsets</code> module provides powerful and flexible tools for creating subsets of companies from SEC reference data. This is especially useful for research, analysis, educational purposes, and machine learning tasks where you need specific groups of companies.</p>
<h2 id="key-features">Key Features</h2>
<ul>
<li><strong>Exchange-based selection</strong>: Filter by NYSE, NASDAQ, OTC, CBOE</li>
<li><strong>Popularity-based selection</strong>: Get popular stocks, mega-cap companies, etc.</li>
<li><strong>Sampling capabilities</strong>: Random sampling, stratified sampling, top N selection</li>
<li><strong>Filtering and combination utilities</strong>: Include/exclude specific companies, combine sets</li>
<li><strong>Fluent interface</strong>: Chain operations for readable, flexible subset creation</li>
<li><strong>Consistent output</strong>: All functions return standardized DataFrames with <code>['cik', 'ticker', 'name', 'exchange']</code> columns</li>
</ul>
<h2 id="quick-start">Quick Start</h2>
<pre><code class="language-python">from edgar.reference.company_subsets import (
    CompanySubset, 
    get_companies_by_exchanges,
    get_popular_companies,
    get_random_sample
)

# Simple exchange-based selection
nyse_companies = get_companies_by_exchanges('NYSE')
print(f&quot;Found {len(nyse_companies)} NYSE companies&quot;)

# Get popular companies
popular = get_popular_companies()
print(f&quot;Found {len(popular)} popular companies&quot;)

# Random sampling
random_100 = get_random_sample(n=100, random_state=42)
print(f&quot;Sampled {len(random_100)} random companies&quot;)
</code></pre>
<h2 id="fluent-interface-with-companysubset">Fluent Interface with CompanySubset</h2>
<p>The <code>CompanySubset</code> class provides a powerful fluent interface for building complex company selections:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import CompanySubset, PopularityTier

# Complex selection with method chaining
companies = (CompanySubset()
             .from_exchange(['NYSE', 'Nasdaq'])        # Major exchanges only
             .exclude_tickers(['JPM', 'GS', 'C'])      # Exclude some financials
             .sample(50, random_state=42)              # Take random sample
             .get())                                   # Get the DataFrame

print(f&quot;Selected {len(companies)} companies&quot;)
print(companies.head())

# Popular tech companies
tech_subset = (CompanySubset()
               .from_popular(PopularityTier.POPULAR)   # Popular companies
               .filter_by(lambda df: df['name'].str.contains('tech|software|computer', case=False))
               .top(20, by='ticker')                   # Top 20 alphabetically
               .get())
</code></pre>
<h2 id="core-functions">Core Functions</h2>
<h3 id="exchange-based-selection">Exchange-Based Selection</h3>
<p>Filter companies by stock exchange:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import get_companies_by_exchanges

# Single exchange
nyse_companies = get_companies_by_exchanges('NYSE')
nasdaq_companies = get_companies_by_exchanges('Nasdaq')

# Multiple exchanges
major_exchanges = get_companies_by_exchanges(['NYSE', 'Nasdaq'])
all_exchanges = get_companies_by_exchanges(['NYSE', 'Nasdaq', 'OTC', 'CBOE'])

print(f&quot;NYSE: {len(nyse_companies)} companies&quot;)
print(f&quot;NASDAQ: {len(nasdaq_companies)} companies&quot;) 
print(f&quot;Major exchanges: {len(major_exchanges)} companies&quot;)
</code></pre>
<h3 id="popular-companies">Popular Companies</h3>
<p>Access curated lists of popular and well-known companies:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import get_popular_companies, PopularityTier

# All popular companies
all_popular = get_popular_companies()

# By popularity tier
mega_cap = get_popular_companies(PopularityTier.MEGA_CAP)      # Top 10
popular = get_popular_companies(PopularityTier.POPULAR)        # Top 50
mainstream = get_popular_companies(PopularityTier.MAINSTREAM)  # Top 100
emerging = get_popular_companies(PopularityTier.EMERGING)      # All available

print(f&quot;Mega cap: {len(mega_cap)} companies&quot;)
print(f&quot;Popular: {len(popular)} companies&quot;)
print(f&quot;All popular: {len(all_popular)} companies&quot;)
</code></pre>
<h3 id="sampling-methods">Sampling Methods</h3>
<p>Create representative samples from larger datasets:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import (
    get_random_sample, 
    get_stratified_sample,
    get_top_companies_by_metric
)

# Random sampling
random_sample = get_random_sample(n=200, random_state=42)

# Stratified sampling (maintains exchange proportions)
stratified_sample = get_stratified_sample(
    n=100, 
    stratify_by='exchange', 
    random_state=42
)

# Top companies by name (alphabetical)
top_alphabetical = get_top_companies_by_metric(
    n=50, 
    metric='name', 
    ascending=True
)

# Sample from a specific subset
nyse_random = get_random_sample(
    get_companies_by_exchanges('NYSE'), 
    n=100, 
    random_state=42
)
</code></pre>
<h2 id="filtering-and-combining">Filtering and Combining</h2>
<h3 id="includeexclude-specific-companies">Include/Exclude Specific Companies</h3>
<pre><code class="language-python">from edgar.reference.company_subsets import filter_companies, exclude_companies

all_companies = get_all_companies()

# Include specific tickers (FAANG companies)
faang = filter_companies(
    all_companies,
    ticker_list=['META', 'AAPL', 'AMZN', 'NFLX', 'GOOGL']
)

# Include companies with names containing specific text
tech_companies = filter_companies(
    all_companies,
    name_contains='Technology'
)

# Include specific CIKs
specific_companies = filter_companies(
    all_companies,
    cik_list=[320193, 1018724, 1652044]  # AAPL, AMZN, GOOGL
)

# Exclude financial companies (simplified example)
non_financial = exclude_companies(
    all_companies,
    ticker_list=['JPM', 'GS', 'C', 'BAC', 'WFC']
)

# Exclude companies with 'Corp' in name  
non_corp = exclude_companies(
    all_companies,
    name_contains='Corp'
)
</code></pre>
<h3 id="custom-filtering">Custom Filtering</h3>
<p>Apply custom filtering logic:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import filter_companies

# Custom filter function
def large_company_filter(df):
    &quot;&quot;&quot;Filter to companies with longer names (proxy for larger companies).&quot;&quot;&quot;
    return df[df['name'].str.len() &gt; 20]

# Apply custom filter
large_companies = filter_companies(
    get_companies_by_exchanges('NYSE'),
    custom_filter=large_company_filter
)

# Using lambda for simple filters
short_tickers = filter_companies(
    get_popular_companies(),
    custom_filter=lambda df: df[df['ticker'].str.len() &lt;= 4]
)
</code></pre>
<h3 id="combining-and-intersecting-sets">Combining and Intersecting Sets</h3>
<pre><code class="language-python">from edgar.reference.company_subsets import combine_company_sets, intersect_company_sets

# Get different company sets
nyse_companies = get_companies_by_exchanges('NYSE')
popular_companies = get_popular_companies()
tech_companies = filter_companies(get_all_companies(), name_contains='Tech')

# Union: Combine multiple sets (removes duplicates)
combined = combine_company_sets([nyse_companies, popular_companies, tech_companies])

# Intersection: Find companies present in all sets
nyse_popular = intersect_company_sets([nyse_companies, popular_companies])
popular_tech = intersect_company_sets([popular_companies, tech_companies])

print(f&quot;Combined: {len(combined)} companies&quot;)
print(f&quot;NYSE + Popular intersection: {len(nyse_popular)} companies&quot;)
print(f&quot;Popular + Tech intersection: {len(popular_tech)} companies&quot;)
</code></pre>
<h2 id="convenience-functions">Convenience Functions</h2>
<p>Pre-defined functions for common company groupings:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import (
    get_faang_companies,
    get_tech_giants, 
    get_dow_jones_sample
)

# FAANG companies (Meta, Apple, Amazon, Netflix, Google)
faang = get_faang_companies()

# Major tech companies
tech_giants = get_tech_giants()

# Dow Jones Industrial Average sample
dow_sample = get_dow_jones_sample()

print(f&quot;FAANG: {len(faang)} companies&quot;)
print(f&quot;Tech Giants: {len(tech_giants)} companies&quot;) 
print(f&quot;Dow Sample: {len(dow_sample)} companies&quot;)

# Display the companies
print(&quot;\nFAANG Companies:&quot;)
for _, company in faang.iterrows():
    print(f&quot;  {company['ticker']}: {company['name']}&quot;)
</code></pre>
<h2 id="advanced-examples">Advanced Examples</h2>
<h3 id="research-dataset-creation">Research Dataset Creation</h3>
<p>Create a balanced research dataset:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import CompanySubset, PopularityTier

# Create a research dataset with companies from different tiers
research_dataset = []

# Get 20 mega-cap companies
mega_cap = (CompanySubset()
           .from_popular(PopularityTier.MEGA_CAP)
           .sample(20, random_state=42)
           .get())

# Get 30 popular mid-tier companies  
mid_tier = (CompanySubset()
           .from_popular(PopularityTier.POPULAR)
           .exclude_tickers(mega_cap['ticker'].tolist())  # Don't overlap
           .sample(30, random_state=42)
           .get())

# Get 50 random companies from major exchanges
random_companies = (CompanySubset()
                    .from_exchange(['NYSE', 'Nasdaq'])
                    .exclude_tickers(mega_cap['ticker'].tolist() + mid_tier['ticker'].tolist())
                    .sample(50, random_state=42)
                    .get())

# Combine all for final research set
research_companies = combine_company_sets([mega_cap, mid_tier, random_companies])
print(f&quot;Research dataset: {len(research_companies)} companies&quot;)

# Analyze composition
exchange_dist = research_companies['exchange'].value_counts()
print(&quot;\nExchange distribution:&quot;)
print(exchange_dist)
</code></pre>
<h3 id="sector-based-analysis">Sector-Based Analysis</h3>
<p>Create industry-focused subsets:</p>
<pre><code class="language-python"># Create sector-based subsets (simplified approach using name patterns)
sectors = {
    'technology': ['tech', 'software', 'computer', 'digital'],
    'financial': ['bank', 'financial', 'insurance', 'capital'],
    'healthcare': ['health', 'medical', 'pharma', 'bio'],
    'energy': ['energy', 'oil', 'gas', 'power'],
    'retail': ['retail', 'store', 'market', 'shop']
}

sector_companies = {}
all_companies = get_companies_by_exchanges(['NYSE', 'Nasdaq'])

for sector, keywords in sectors.items():
    # Create pattern for all keywords
    pattern = '|'.join(keywords)

    sector_subset = filter_companies(
        all_companies,
        custom_filter=lambda df, p=pattern: df[df['name'].str.contains(p, case=False)]
    )

    sector_companies[sector] = sector_subset
    print(f&quot;{sector.title()}: {len(sector_subset)} companies&quot;)

# Get top 10 from each sector for analysis
analysis_set = []
for sector, companies in sector_companies.items():
    top_10 = get_top_companies_by_metric(companies, n=10, metric='ticker')
    analysis_set.append(top_10)

final_analysis_set = combine_company_sets(analysis_set)
print(f&quot;\nFinal analysis set: {len(final_analysis_set)} companies across sectors&quot;)
</code></pre>
<h3 id="machine-learning-dataset-preparation">Machine Learning Dataset Preparation</h3>
<p>Prepare balanced datasets for ML training:</p>
<pre><code class="language-python">from edgar.reference.company_subsets import get_stratified_sample

# Create training/test split with stratification
all_popular = get_popular_companies()

# Training set (70% of data, stratified by exchange)
training_companies = get_stratified_sample(
    all_popular,
    n=int(len(all_popular) * 0.7),
    stratify_by='exchange',
    random_state=42
)

# Test set (remaining companies)  
test_companies = all_popular[~all_popular['cik'].isin(training_companies['cik'])]

print(f&quot;Training set: {len(training_companies)} companies&quot;)
print(f&quot;Test set: {len(test_companies)} companies&quot;)

# Verify stratification worked
print(&quot;\nTraining exchange distribution:&quot;)
print(training_companies['exchange'].value_counts(normalize=True))

print(&quot;\nTest exchange distribution:&quot;)  
print(test_companies['exchange'].value_counts(normalize=True))
</code></pre>
<h2 id="data-structure">Data Structure</h2>
<p>All functions return a standardized pandas DataFrame with these columns:</p>
<ul>
<li><strong><code>cik</code></strong> (int): SEC Central Index Key - unique company identifier</li>
<li><strong><code>ticker</code></strong> (str): Stock ticker symbol (e.g., 'AAPL', 'MSFT')  </li>
<li><strong><code>name</code></strong> (str): Official company name</li>
<li><strong><code>exchange</code></strong> (str): Stock exchange ('NYSE', 'Nasdaq', 'OTC', 'CBOE', etc.)</li>
</ul>
<pre><code class="language-python"># Example output structure
companies = get_random_sample(5)
print(companies)

#        cik ticker                     name exchange
# 0   320193   AAPL             Apple Inc.   Nasdaq
# 1  1018724   AMZN        Amazon.com, Inc.   Nasdaq  
# 2  1652044  GOOGL          Alphabet Inc.   Nasdaq
# 3   789019   MSFT  Microsoft Corporation   Nasdaq
# 4  1326801   META     Meta Platforms, Inc   Nasdaq
</code></pre>
<h2 id="error-handling">Error Handling</h2>
<p>The module includes robust error handling and logging:</p>
<pre><code class="language-python"># Functions gracefully handle errors and return empty DataFrames
empty_result = get_companies_by_exchanges('INVALID_EXCHANGE')
print(f&quot;Invalid exchange result: {len(empty_result)} companies&quot;)

# Check for empty results
companies = get_random_sample(n=10)
if companies.empty:
    print(&quot;No companies found&quot;)
else:
    print(f&quot;Found {len(companies)} companies&quot;)

# All functions include logging for debugging
import logging
logging.basicConfig(level=logging.DEBUG)

# Now function calls will show debug information
companies = get_popular_companies()
</code></pre>
<h2 id="performance-considerations">Performance Considerations</h2>
<ul>
<li><strong>Caching</strong>: <code>get_all_companies()</code> uses LRU cache for performance</li>
<li><strong>Lazy evaluation</strong>: CompanySubset operations are efficient and don't duplicate data unnecessarily</li>
<li><strong>Memory efficient</strong>: Functions work with DataFrame views when possible</li>
<li><strong>Batch operations</strong>: Use combine/intersect functions instead of loops for better performance</li>
</ul>
<pre><code class="language-python"># Efficient: Use batch operations
company_sets = [
    get_companies_by_exchanges('NYSE'),
    get_companies_by_exchanges('Nasdaq'),
    get_popular_companies()
]
combined = combine_company_sets(company_sets)

# Less efficient: Multiple individual operations in loops
# combined = pd.DataFrame()
# for exchange in ['NYSE', 'Nasdaq']:
#     exchange_companies = get_companies_by_exchanges(exchange)
#     combined = pd.concat([combined, exchange_companies])  # Avoid this pattern
</code></pre>
<h2 id="integration-with-edgar-tools">Integration with Edgar Tools</h2>
<p>Company subsets integrate seamlessly with other Edgar tools:</p>
<pre><code class="language-python">from edgar import Company
from edgar.reference.company_subsets import get_tech_giants

# Get tech companies and analyze their latest filings
tech_companies = get_tech_giants()

for _, company_info in tech_companies.head(5).iterrows():
    try:
        company = Company(company_info['ticker'])
        latest_filing = company.get_filings(form='10-K').latest()
        print(f&quot;{company_info['ticker']}: Latest 10-K filed {latest_filing.filing_date}&quot;)
    except:
        print(f&quot;{company_info['ticker']}: No recent 10-K found&quot;)
</code></pre>
<h2 id="best-practices">Best Practices</h2>
<ol>
<li><strong>Use appropriate sample sizes</strong>: Don't sample more companies than you need for analysis</li>
<li><strong>Set random seeds</strong>: Use <code>random_state</code> parameter for reproducible results  </li>
<li><strong>Handle empty results</strong>: Always check if returned DataFrames are empty</li>
<li><strong>Combine operations efficiently</strong>: Use method chaining with CompanySubset for readable code</li>
<li><strong>Cache results</strong>: Store company subsets if you'll reuse them multiple times</li>
<li><strong>Validate data</strong>: Check that your filters return expected results</li>
</ol>
<pre><code class="language-python"># Good: Reproducible and efficient
companies = (CompanySubset()
            .from_exchange('NYSE') 
            .sample(100, random_state=42)
            .get())

# Store for reuse
cached_companies = companies.copy()

# Good: Check for empty results
if not companies.empty:
    print(f&quot;Analysis ready with {len(companies)} companies&quot;)
else:
    print(&quot;No companies found matching criteria&quot;)
</code></pre>
<p>This module provides a comprehensive toolkit for creating company subsets tailored to your specific research, analysis, or educational needs. The combination of simple functions and the powerful fluent interface makes it easy to create both simple selections and complex, multi-criteria company datasets.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>